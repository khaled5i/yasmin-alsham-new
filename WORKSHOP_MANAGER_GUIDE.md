# ุฏููู ูุฏูุฑ ุงููุฑุดุฉ (Workshop Manager)
# Workshop Manager Guide

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุน ุนุงูู ุฌุฏูุฏ: **ูุฏูุฑ ุงููุฑุดุฉ** (Workshop Manager) ุฅูู ูุธุงู ุงูุตูุงุญูุงุช. ูุฐุง ุงูููุน ูุฎุตุต ููุนูุงู ุงููุณุคูููู ุนู ูุชุงุจุนุฉ ุงูุทูุจุงุช ูู ุงููุฑุดุฉ.

---

## ๐ฏ ูุนูููุงุช ูุฏูุฑ ุงููุฑุดุฉ

### **ุงูููุฏ:** `workshop_manager`
### **ุงูุงุณู ุจุงูุนุฑุจูุฉ:** ูุฏูุฑ ุงููุฑุดุฉ
### **ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ:** Workshop Manager
### **ุงููุตู:** ูุณุคูู ุนู ูุชุงุจุนุฉ ุงูุทูุจุงุช (ุงูุญุฏูุซุฉุ ุงูููุชููุฉุ ุงููุณููุฉ)

---

## โ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ

| ุงูุตูุงุญูุฉ | ุงูุญุงูุฉ | ุงููุตู |
|---------|--------|-------|
| **ุงููุตูู ุฅูู ุงูุทูุจุงุช** | โ ูุชุงุญ | ููููู ุงููุตูู ุฅูู ุฌููุน ุตูุญุงุช ุงูุทูุจุงุช |
| **ุงููุตูู ุฅูู ุงูุฃููุดุฉ** | โ ุบูุฑ ูุชุงุญ | ูุง ููููู ุฅุฏุงุฑุฉ ุงูุฃููุดุฉ |
| **ุงููุตูู ุฅูู ุงูููุชุฌุงุช** | โ ุบูุฑ ูุชุงุญ | ูุง ููููู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช |
| **ุงููุตูู ุฅูู ุงููุญุงุณุจุฉ** | โ ุบูุฑ ูุชุงุญ | ูุง ููููู ุงููุตูู ุฅูู ุงููุธุงู ุงููุญุงุณุจู |
| **ุงููุตูู ุฅูู ุงูุนูุงู** | โ ุบูุฑ ูุชุงุญ | ูุง ููููู ุฅุฏุงุฑุฉ ุงูุนูุงู |
| **ุงููุตูู ุฅูู ุงูููุงุนูุฏ** | โ ุบูุฑ ูุชุงุญ | ูุง ููููู ุฅุฏุงุฑุฉ ุงูููุงุนูุฏ |
| **ุงููุตูู ุฅูู ุงูุฅุนุฏุงุฏุงุช** | โ ุบูุฑ ูุชุงุญ | ูุง ููููู ุงููุตูู ุฅูู ุงูุฅุนุฏุงุฏุงุช |

---

## ๐ ุงูุตูุญุงุช ุงููุชุงุญุฉ

### 1. **ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ**
- **ุงูุฑุงุจุท:** `/dashboard/workshop-manager`
- **ุงููุตู:** ููุญุฉ ุชุญูู ูุฎุตุตุฉ ููุฏูุฑ ุงููุฑุดุฉ ุชุญุชูู ุนูู ุฑูุงุจุท ุณุฑูุนุฉ ูุฌููุน ุตูุญุงุช ุงูุทูุจุงุช
- **ุงููุญุชูู:**
  - ุจุทุงูุฉ ุงูุทูุจุงุช ุงูุญุฏูุซุฉ
  - ุจุทุงูุฉ ุงูุทูุจุงุช ุงูููุชููุฉ
  - ุจุทุงูุฉ ุงูุทูุจุงุช ุงููุณููุฉ

### 2. **ุงูุทูุจุงุช ุงูุญุฏูุซุฉ**
- **ุงูุฑุงุจุท:** `/dashboard/orders`
- **ุงููุตู:** ุนุฑุถ ููุชุงุจุนุฉ ุงูุทูุจุงุช ุงูุฌุงุฑูุฉ
- **ุงููุธุงุฆู:**
  - ุนุฑุถ ุฌููุน ุงูุทูุจุงุช ุงูุญุฏูุซุฉ
  - ุงูุจุญุซ ุนู ุงูุทูุจุงุช
  - ุนุฑุถ ุชูุงุตูู ุงูุทูุจ
  - ูุชุงุจุนุฉ ุญุงูุฉ ุงูุทูุจ

### 3. **ุงูุทูุจุงุช ุงูููุชููุฉ**
- **ุงูุฑุงุจุท:** `/dashboard/completed-orders`
- **ุงููุตู:** ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ุงูููุชููุฉ ูุชุณููููุง
- **ุงููุธุงุฆู:**
  - ุนุฑุถ ุงูุทูุจุงุช ุงูููุชููุฉ
  - ุชุณููู ุงูุทูุจุงุช ููุนููุงุก
  - ุนุฑุถ ุชูุงุตูู ุงูุทูุจ

### 4. **ุงูุทูุจุงุช ุงููุณููุฉ**
- **ุงูุฑุงุจุท:** `/dashboard/delivered-orders`
- **ุงููุตู:** ุนุฑุถ ุณุฌู ุงูุทูุจุงุช ุงููุณููุฉ
- **ุงููุธุงุฆู:**
  - ุนุฑุถ ุฌููุน ุงูุทูุจุงุช ุงููุณููุฉ
  - ุงูุจุญุซ ูู ุงูุณุฌู
  - ุนุฑุถ ุชูุงุตูู ุงูุทูุจุงุช ุงูุณุงุจูุฉ

---

## ๐๏ธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Migration File
**ุงูููู:** `supabase/migrations/10-add-workshop-manager-type.sql`

### ูุง ููุนูู Migration:
1. ุญุฐู ููุฏ CHECK ุงููุฏูู ุนูู ุนููุฏ `worker_type`
2. ุฅุถุงูุฉ ููุฏ CHECK ุฌุฏูุฏ ูุชุถูู `'workshop_manager'`

### ุฎุทูุงุช ุงูุชุทุจูู:

#### **ุงูุทุฑููุฉ 1: ุนุจุฑ Supabase Dashboard (ููุตู ุจูุง)**
1. ุงูุชุญ **Supabase Dashboard**
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุญุชูู ููู `supabase/migrations/10-add-workshop-manager-type.sql`
4. ุงูุตู ุงููุญุชูู ูู SQL Editor
5. ุงุถุบุท **Run** ูุชูููุฐ ุงูุฃูุงูุฑ
6. ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุญุฐู ุงูููุฏ ุงููุฏูู workers_worker_type_check"

#### **ุงูุทุฑููุฉ 2: ุนุจุฑ Supabase CLI**
```bash
supabase migration up
```

#### **ุงูุทุฑููุฉ 3: ุชูููุฐ ูุจุงุดุฑ (ููุงุฎุชุจุงุฑ ุงูุณุฑูุน)**
```sql
-- ุญุฐู ุงูููุฏ ุงููุฏูู
ALTER TABLE workers DROP CONSTRAINT IF EXISTS workers_worker_type_check;

-- ุฅุถุงูุฉ ุงูููุฏ ุงูุฌุฏูุฏ
ALTER TABLE workers
ADD CONSTRAINT workers_worker_type_check
CHECK (worker_type IN ('tailor', 'fabric_store_manager', 'accountant', 'general_manager', 'workshop_manager'));
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### 1. **src/lib/services/worker-service.ts**
- **ุงูุชุนุฏูู:** ุฅุถุงูุฉ `'workshop_manager'` ุฅูู ููุน `WorkerType`
- **ุงูุณุทุฑ:** 15
```typescript
export type WorkerType = 'tailor' | 'fabric_store_manager' | 'accountant' | 'general_manager' | 'workshop_manager'
```

### 2. **src/lib/worker-types.ts**
- **ุงูุชุนุฏููุงุช:**
  - ุฅุถุงูุฉ ุงูุงุณู ุงูุนุฑุจู: `workshop_manager: 'ูุฏูุฑ ุงููุฑุดุฉ'`
  - ุฅุถุงูุฉ ุงูุงุณู ุงูุฅูุฌููุฒู: `workshop_manager: 'Workshop Manager'`
  - ุฅุถุงูุฉ ุงูุตูุงุญูุงุช
  - ุฅุถุงูุฉ ุงูุฎูุงุฑ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
  - ุฅุถุงูุฉ ุงููุตู

### 3. **src/app/dashboard/completed-orders/page.tsx**
- **ุงูุชุนุฏูู:** ุชุญุฏูุซ ููุทู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ููุณูุงุญ ููุฏูุฑ ุงููุฑุดุฉ ุจุงููุตูู
- **ุงูุฃุณุทุฑ:** 12, 38, 58-72, 179-205

### 4. **src/app/dashboard/delivered-orders/page.tsx**
- **ุงูุชุนุฏูู:** ุชุญุฏูุซ ููุทู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ููุณูุงุญ ููุฏูุฑ ุงููุฑุดุฉ ุจุงููุตูู
- **ุงูุฃุณุทุฑ:** 29, 36, 46-67, 153-183

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. **src/app/dashboard/workshop-manager/page.tsx**
- **ุงููุตู:** ููุญุฉ ุชุญูู ูุฎุตุตุฉ ููุฏูุฑ ุงููุฑุดุฉ
- **ุงููุญุชูู:**
  - ููุฏุฑ ูุน ูุนูููุงุช ุงููุณุชุฎุฏู ูุฒุฑ ุชุณุฌูู ุงูุฎุฑูุฌ
  - ุฑุณุงูุฉ ุชุฑุญูุจ
  - 3 ุจุทุงูุงุช ูููุตูู ุงูุณุฑูุน ุฅูู ุตูุญุงุช ุงูุทูุจุงุช
- **ุงูุฃููุงู:** ุฃุฒุฑู/ูููู (blue/indigo) ูุชูููุฒ ูุณู ุงููุฑุดุฉ

### 2. **supabase/migrations/10-add-workshop-manager-type.sql**
- **ุงููุตู:** ููู migration ูุฅุถุงูุฉ `workshop_manager` ุฅูู enum ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุงููุญุชูู:**
  - ุฅุถุงูุฉ ุงููููุฉ ุงูุฌุฏูุฏุฉ ุฅูู `worker_type` enum
  - ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุงููููุฉ ูุณุจูุงู
  - ุงุณุชุนูุงู ููุชุญูู ูู ูุฌุงุญ ุงูุนูููุฉ

---

## ๐ ููููุฉ ุฅุถุงูุฉ ูุฏูุฑ ูุฑุดุฉ ุฌุฏูุฏ

### **ุนุจุฑ ูุงุฌูุฉ ุงููุธุงู:**

1. ุณุฌู ุงูุฏุฎูู ููุฏูุฑ (Admin)
2. ุงุฐูุจ ุฅูู **ุฅุฏุงุฑุฉ ุงูุนูุงู** (`/dashboard/workers`)
3. ุงุถุบุท ุนูู **ุฅุถุงูุฉ ุนุงูู ุฌุฏูุฏ**
4. ุงููุฃ ุงูุจูุงูุงุช:
   - **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**
   - **ูููุฉ ุงููุฑูุฑ**
   - **ุงูุงุณู ุงููุงูู**
   - **ุฑูู ุงููุงุชู** (ุงุฎุชูุงุฑู)
   - **ุงูุชุฎุตุต:** ุงูุชุจ "ูุฏูุฑ ูุฑุดุฉ" ุฃู ุฃู ุชุฎุตุต ููุงุณุจ
   - **ููุน ุงูุนุงูู:** ุงุฎุชุฑ **"ูุฏูุฑ ุงููุฑุดุฉ"** ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
5. ุงุถุบุท **ุฅุถุงูุฉ**

### **ุนุจุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ:**

```sql
-- 1. ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
INSERT INTO users (email, full_name, phone, role, is_active)
VALUES ('workshop.manager@example.com', 'ุฃุญูุฏ ูุญูุฏ', '0501234567', 'worker', true);

-- 2. ุฅูุดุงุก ุณุฌู ุนุงูู
INSERT INTO workers (user_id, specialty, worker_type, experience_years, hourly_rate, is_available)
VALUES (
  (SELECT id FROM users WHERE email = 'workshop.manager@example.com'),
  'ูุฏูุฑ ูุฑุดุฉ',
  'workshop_manager',
  5,
  0,
  true
);
```

---

## โ ุงูุชุญูู ูู ูุฌุงุญ ุงูุชุทุจูู

### 1. **ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
-- ุนุฑุถ ุฌููุน ูุฏุฑุงุก ุงููุฑุดุฉ
SELECT 
  w.id,
  u.full_name,
  u.email,
  w.specialty,
  w.worker_type
FROM workers w
JOIN users u ON w.user_id = u.id
WHERE w.worker_type = 'workshop_manager'
ORDER BY w.created_at DESC;
```

### 2. **ุงูุชุญูู ูู ุงููุงุฌูุฉ:**
- ุงูุชุญ `/dashboard/workers`
- ูุฌุจ ุฃู ุชุฑู "ูุฏูุฑ ุงููุฑุดุฉ" ูู ูุงุฆูุฉ ุฃููุงุน ุงูุนูุงู
- ุฃุถู ุนุงูู ุฌุฏูุฏ ูุงุฎุชุฑ "ูุฏูุฑ ุงููุฑุดุฉ"

### 3. **ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู:**
- ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจ ูุฏูุฑ ูุฑุดุฉ
- ูุฌุจ ุฃู ูุชู ุชูุฌููู ุฅูู `/dashboard/workshop-manager`
- ูุฌุจ ุฃู ุชุฑู 3 ุจุทุงูุงุช ููุทูุจุงุช

### 4. **ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช:**
- ุญุงูู ุงููุตูู ุฅูู `/dashboard/orders` - ูุฌุจ ุฃู ููุฌุญ โ
- ุญุงูู ุงููุตูู ุฅูู `/dashboard/completed-orders` - ูุฌุจ ุฃู ููุฌุญ โ
- ุญุงูู ุงููุตูู ุฅูู `/dashboard/delivered-orders` - ูุฌุจ ุฃู ููุฌุญ โ
- ุญุงูู ุงููุตูู ุฅูู `/dashboard/fabrics` - ูุฌุจ ุฃู ูุชู ุฑูุถู โ
- ุญุงูู ุงููุตูู ุฅูู `/dashboard/accounting` - ูุฌุจ ุฃู ูุชู ุฑูุถู โ

---

## ๐จ ุงูุชุตููู

### **ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:**
- **ุงูููู ุงูุฃุณุงุณู:** ุฃุฒุฑู/ูููู (Blue/Indigo)
- **ุงูุฎูููุฉ:** ุชุฏุฑุฌ ูู ุงููุฑุฏู ุงููุงุชุญ ุฅูู ุงูุจููุณุฌู ุงููุงุชุญ
- **ุงูุจุทุงูุงุช:**
  - ุงูุทูุจุงุช ุงูุญุฏูุซุฉ: ุฃุฒุฑู/ุณูุงูู (Blue/Cyan)
  - ุงูุทูุจุงุช ุงูููุชููุฉ: ุฃุฎุถุฑ/ุฒูุฑุฏู (Green/Emerald)
  - ุงูุทูุจุงุช ุงููุณููุฉ: ุจููุณุฌู/ูููู (Purple/Indigo)

### **ุงูุฃููููุงุช:**
- **ููุญุฉ ุงูุชุญูู:** `Wrench` (ููุชุงุญ ุฑุจุท)
- **ุงูุทูุจุงุช ุงูุญุฏูุซุฉ:** `Package` (ุตูุฏูู)
- **ุงูุทูุจุงุช ุงูููุชููุฉ:** `PackageCheck` (ุตูุฏูู ูุน ุนูุงูุฉ ุตุญ)
- **ุงูุทูุจุงุช ุงููุณููุฉ:** `Truck` (ุดุงุญูุฉ)

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### **ุงููุดููุฉ 1: ูุง ูุธูุฑ "ูุฏูุฑ ุงููุฑุดุฉ" ูู ูุงุฆูุฉ ุฃููุงุน ุงูุนูุงู**
**ุงูุญู:**
- ุชุฃูุฏ ูู ุชุทุจูู migration ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุญูู ูู ููู `src/lib/worker-types.ts`

### **ุงููุดููุฉ 2: ูุชู ุฑูุถ ุงููุตูู ุฅูู ุตูุญุงุช ุงูุทูุจุงุช**
**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู `worker_type` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู `'workshop_manager'`
- ุชุญูู ูู ุฃู ุงูุตูุญุงุช ุชุณุชุฎุฏู `useWorkerPermissions` hook

### **ุงููุดููุฉ 3: ูุชู ุชูุฌูู ูุฏูุฑ ุงููุฑุดุฉ ุฅูู `/dashboard` ุจุฏูุงู ูู `/dashboard/workshop-manager`**
**ุงูุญู:**
- ุชุญูู ูู ููู `src/lib/worker-types.ts` - ูุฌุจ ุฃู ูููู `dashboardRoute: '/dashboard/workshop-manager'`
- ุชุญูู ูู ููู `src/app/login/page.tsx` - ูุฌุจ ุฃู ูุณุชุฎุฏู `getWorkerDashboardRoute()`

---

## ๐ ููุงุฑูุฉ ูุน ุฃููุงุน ุงูุนูุงู ุงูุฃุฎุฑู

| ุงูููุฒุฉ | ูุฏูุฑ ุนุงู | ูุฏูุฑ ูุฑุดุฉ | ุฎูุงุท | ูุฏูุฑ ุฃููุดุฉ | ูุญุงุณุจ |
|-------|----------|-----------|------|-----------|--------|
| ุงูุทูุจุงุช | โ | โ | โ | โ | โ |
| ุงูุฃููุดุฉ | โ | โ | โ | โ | โ |
| ุงููุญุงุณุจุฉ | โ | โ | โ | โ | โ |
| ุงูุนูุงู | โ | โ | โ | โ | โ |
| ุงูุฅุนุฏุงุฏุงุช | โ | โ | โ | โ | โ |

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅุถุงูุฉ ููุน ุนุงูู ุฌุฏูุฏ "ูุฏูุฑ ุงููุฑุดุฉ" ุจูุฌุงุญ! ูุฐุง ุงูููุน:
- โ ูู ููุญุฉ ุชุญูู ูุฎุตุตุฉ
- โ ููููู ุงููุตูู ุฅูู ุฌููุน ุตูุญุงุช ุงูุทูุจุงุช
- โ ูุง ููููู ุงููุตูู ุฅูู ุงูุฃูุณุงู ุงูุฃุฎุฑู (ุงูุฃููุดุฉุ ุงููุญุงุณุจุฉุ ุฅูุฎ)
- โ ูุชู ุชูุฌููู ุชููุงุฆูุงู ุฅูู ููุญุฉ ุงูุชุญูู ุงูุตุญูุญุฉ ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
- โ ูุชูุงูู ุจุงููุงูู ูุน ูุธุงู ุงูุตูุงุญูุงุช ุงูููุฌูุฏ

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2024-12-26  
**ุงูุฅุตุฏุงุฑ:** 1.0  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

