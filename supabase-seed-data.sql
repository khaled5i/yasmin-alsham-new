-- ========================================
-- Yasmin Alsham Seed Data
-- البيانات التجريبية لقاعدة بيانات ياسمين الشام
-- Version: 3.0
-- ========================================

-- ملاحظة: يجب تنفيذ هذا الملف بعد تنفيذ supabase-schema.sql و supabase-rls-policies.sql

-- ========================================
-- 1. إدراج المستخدمين (Users)
-- ========================================

-- ملاحظة: يجب إنشاء المستخدمين عبر Supabase Auth أولاً
-- هذه البيانات للمرجع فقط، استخدم Supabase Dashboard لإنشاء المستخدمين

-- Admin User
INSERT INTO users (id, email, full_name, phone, role, is_active, email_verified)
VALUES 
  ('00000000-0000-0000-0000-000000000001', 'admin@yasminalsh.com', 'مدير النظام', '+966501234567', 'admin', true, true);

-- Worker Users
INSERT INTO users (id, email, full_name, phone, role, is_active, email_verified)
VALUES 
  ('00000000-0000-0000-0000-000000000002', 'fatima@yasminalsh.com', 'فاطمة أحمد', '+966502345678', 'worker', true, true),
  ('00000000-0000-0000-0000-000000000003', 'aisha@yasminalsh.com', 'عائشة محمد', '+966503456789', 'worker', true, true);

-- Client Users
INSERT INTO users (id, email, full_name, phone, role, is_active, email_verified)
VALUES 
  ('00000000-0000-0000-0000-000000000004', 'sara@example.com', 'سارة علي', '+966504567890', 'client', true, true),
  ('00000000-0000-0000-0000-000000000005', 'noor@example.com', 'نور خالد', '+966505678901', 'client', true, true);

-- ========================================
-- 2. إدراج العمال (Workers)
-- ========================================

INSERT INTO workers (id, user_id, specialization, experience_years, hourly_rate, is_available, skills, bio, rating)
VALUES 
  (
    '10000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000002',
    'فساتين الزفاف',
    8,
    150.00,
    true,
    ARRAY['خياطة فساتين الزفاف', 'تطريز يدوي', 'تصميم مخصص'],
    'خبرة 8 سنوات في خياطة فساتين الزفاف الفاخرة',
    4.9
  ),
  (
    '10000000-0000-0000-0000-000000000002',
    '00000000-0000-0000-0000-000000000003',
    'فساتين السهرة',
    5,
    120.00,
    true,
    ARRAY['فساتين السهرة', 'تفصيل عبايات', 'تطريز'],
    'متخصصة في فساتين السهرة والعبايات الفاخرة',
    4.8
  );

-- ========================================
-- 3. إدراج التصاميم (Designs)
-- ========================================

INSERT INTO designs (
  id, name, name_en, description, category, price, image_url, 
  is_active, is_featured, available_sizes, available_colors, estimated_days
)
VALUES 
  (
    '20000000-0000-0000-0000-000000000001',
    'فستان زفاف كلاسيكي',
    'Classic Wedding Dress',
    'فستان زفاف أبيض كلاسيكي مع تطريز يدوي فاخر وذيل طويل',
    'wedding',
    5000.00,
    '/wedding-dress-1.jpg',
    true,
    true,
    ARRAY['S', 'M', 'L', 'XL'],
    ARRAY['أبيض', 'عاجي', 'شامبين'],
    21
  ),
  (
    '20000000-0000-0000-0000-000000000002',
    'فستان زفاف عصري',
    'Modern Wedding Dress',
    'فستان زفاف عصري بتصميم بسيط وأنيق مع تفاصيل من الدانتيل',
    'wedding',
    4500.00,
    '/wedding-dress-2.jpg',
    true,
    true,
    ARRAY['S', 'M', 'L', 'XL'],
    ARRAY['أبيض', 'عاجي'],
    18
  ),
  (
    '20000000-0000-0000-0000-000000000003',
    'فستان سهرة فاخر',
    'Luxury Evening Dress',
    'فستان سهرة طويل بتصميم فاخر مع تطريز من الخرز والكريستال',
    'evening',
    3500.00,
    '/wedding-dress-3.jpg',
    true,
    true,
    ARRAY['S', 'M', 'L', 'XL'],
    ARRAY['أحمر', 'أزرق', 'أسود', 'ذهبي'],
    14
  ),
  (
    '20000000-0000-0000-0000-000000000004',
    'فستان سهرة قصير',
    'Short Evening Dress',
    'فستان سهرة قصير أنيق مناسب للحفلات والمناسبات',
    'evening',
    2500.00,
    '/wedding-dress-4.jpg',
    true,
    false,
    ARRAY['S', 'M', 'L', 'XL'],
    ARRAY['أسود', 'أحمر', 'وردي'],
    10
  ),
  (
    '20000000-0000-0000-0000-000000000005',
    'فستان كاجوال أنيق',
    'Elegant Casual Dress',
    'فستان كاجوال أنيق للاستخدام اليومي والمناسبات البسيطة',
    'casual',
    1500.00,
    '/wedding-dress-5.jpg',
    true,
    false,
    ARRAY['S', 'M', 'L', 'XL', 'XXL'],
    ARRAY['أزرق', 'بيج', 'رمادي'],
    7
  ),
  (
    '20000000-0000-0000-0000-000000000006',
    'عباية تقليدية فاخرة',
    'Luxury Traditional Abaya',
    'عباية تقليدية فاخرة مع تطريز يدوي وتفاصيل من الكريستال',
    'traditional',
    2800.00,
    '/wedding-dress-6.jpg',
    true,
    true,
    ARRAY['S', 'M', 'L', 'XL'],
    ARRAY['أسود', 'كحلي', 'بني'],
    12
  );

-- ========================================
-- 4. إدراج الأقمشة (Fabrics)
-- ========================================

INSERT INTO fabrics (id, name, name_en, description, type, available_colors, price_per_meter, is_active, stock_quantity)
VALUES 
  (
    '30000000-0000-0000-0000-000000000001',
    'حرير طبيعي',
    'Natural Silk',
    'حرير طبيعي فاخر 100% مناسب لفساتين الزفاف والسهرة',
    'silk',
    ARRAY['أبيض', 'عاجي', 'شامبين', 'ذهبي'],
    250.00,
    true,
    150.5
  ),
  (
    '30000000-0000-0000-0000-000000000002',
    'دانتيل فرنسي',
    'French Lace',
    'دانتيل فرنسي فاخر مع تطريز يدوي',
    'lace',
    ARRAY['أبيض', 'عاجي', 'أسود'],
    350.00,
    true,
    80.0
  ),
  (
    '30000000-0000-0000-0000-000000000003',
    'شيفون',
    'Chiffon',
    'شيفون خفيف وأنيق مناسب لفساتين السهرة',
    'chiffon',
    ARRAY['أحمر', 'أزرق', 'أسود', 'وردي', 'بيج'],
    120.00,
    true,
    200.0
  ),
  (
    '30000000-0000-0000-0000-000000000004',
    'ساتان',
    'Satin',
    'ساتان لامع فاخر',
    'satin',
    ARRAY['أبيض', 'أسود', 'أحمر', 'ذهبي', 'فضي'],
    180.00,
    true,
    120.0
  );

-- ========================================
-- 5. إدراج المواعيد (Appointments)
-- ========================================

INSERT INTO appointments (
  id, user_id, client_name, client_phone, client_email, 
  appointment_date, appointment_time, service_type, status, notes
)
VALUES 
  (
    '40000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000004',
    'سارة علي',
    '+966504567890',
    'sara@example.com',
    '2025-11-05',
    '10:00',
    'قياس فستان زفاف',
    'confirmed',
    'أرغب في فستان كلاسيكي بتطريز يدوي'
  ),
  (
    '40000000-0000-0000-0000-000000000002',
    NULL,
    'ليلى محمد',
    '+966506789012',
    'layla@example.com',
    '2025-11-06',
    '14:00',
    'استشارة تصميم',
    'pending',
    'موعد استشارة لتصميم فستان سهرة'
  ),
  (
    '40000000-0000-0000-0000-000000000003',
    '00000000-0000-0000-0000-000000000005',
    'نور خالد',
    '+966505678901',
    'noor@example.com',
    '2025-11-07',
    '11:00',
    'تجربة فستان',
    'confirmed',
    'تجربة نهائية للفستان'
  );

-- ========================================
-- 6. إدراج الطلبات (Orders)
-- ========================================

INSERT INTO orders (
  id, order_number, user_id, worker_id, client_name, client_phone, 
  status, total_price, paid_amount, payment_status, 
  measurements, estimated_delivery_date
)
VALUES 
  (
    '50000000-0000-0000-0000-000000000001',
    'YAS-20251025-0001',
    '00000000-0000-0000-0000-000000000004',
    '10000000-0000-0000-0000-000000000001',
    'سارة علي',
    '+966504567890',
    'in_progress',
    5000.00,
    2500.00,
    'partial',
    '{"bust": "90", "waist": "70", "hips": "95", "height": "165"}'::jsonb,
    '2025-11-25'
  ),
  (
    '50000000-0000-0000-0000-000000000002',
    'YAS-20251025-0002',
    '00000000-0000-0000-0000-000000000005',
    '10000000-0000-0000-0000-000000000002',
    'نور خالد',
    '+966505678901',
    'confirmed',
    3500.00,
    1000.00,
    'partial',
    '{"bust": "85", "waist": "65", "hips": "90", "height": "160"}'::jsonb,
    '2025-11-20'
  );

-- ========================================
-- 7. إدراج عناصر الطلبات (Order Items)
-- ========================================

INSERT INTO order_items (
  id, order_id, design_id, item_name, quantity, price, 
  selected_size, selected_color
)
VALUES 
  (
    '60000000-0000-0000-0000-000000000001',
    '50000000-0000-0000-0000-000000000001',
    '20000000-0000-0000-0000-000000000001',
    'فستان زفاف كلاسيكي',
    1,
    5000.00,
    'M',
    'أبيض'
  ),
  (
    '60000000-0000-0000-0000-000000000002',
    '50000000-0000-0000-0000-000000000002',
    '20000000-0000-0000-0000-000000000003',
    'فستان سهرة فاخر',
    1,
    3500.00,
    'S',
    'أحمر'
  );

-- ========================================
-- 8. إدراج المفضلة (Favorites)
-- ========================================

INSERT INTO favorites (user_id, design_id)
VALUES 
  ('00000000-0000-0000-0000-000000000004', '20000000-0000-0000-0000-000000000001'),
  ('00000000-0000-0000-0000-000000000004', '20000000-0000-0000-0000-000000000003'),
  ('00000000-0000-0000-0000-000000000005', '20000000-0000-0000-0000-000000000002'),
  ('00000000-0000-0000-0000-000000000005', '20000000-0000-0000-0000-000000000006');

-- ========================================
-- 9. إدراج السلة (Cart Items)
-- ========================================

INSERT INTO cart_items (
  user_id, design_id, quantity, selected_size, selected_color
)
VALUES 
  ('00000000-0000-0000-0000-000000000004', '20000000-0000-0000-0000-000000000004', 1, 'M', 'أسود'),
  ('00000000-0000-0000-0000-000000000005', '20000000-0000-0000-0000-000000000005', 1, 'L', 'أزرق');

-- ========================================
-- 10. تحديث الإحصائيات
-- ========================================

-- تحديث عدد المفضلة في التصاميم
UPDATE designs SET favorites_count = (
  SELECT COUNT(*) FROM favorites WHERE favorites.design_id = designs.id
);

-- تحديث عدد الطلبات في التصاميم
UPDATE designs SET orders_count = (
  SELECT COALESCE(SUM(quantity), 0) FROM order_items WHERE order_items.design_id = designs.id
);

-- تحديث عدد الطلبات في العمال
UPDATE workers SET total_orders = (
  SELECT COUNT(*) FROM orders WHERE orders.worker_id = workers.id
);

-- ========================================
-- نهاية البيانات التجريبية
-- ========================================

-- ملاحظات:
-- 1. يجب إنشاء المستخدمين عبر Supabase Auth أولاً
-- 2. استخدم نفس UUIDs المذكورة أعلاه عند إنشاء المستخدمين
-- 3. أو قم بتحديث UUIDs في هذا الملف لتتطابق مع المستخدمين المنشأين
-- 4. تأكد من تنفيذ supabase-schema.sql و supabase-rls-policies.sql أولاً

