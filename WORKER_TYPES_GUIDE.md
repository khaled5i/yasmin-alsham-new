# ุฏููู ุฃููุงุน ุงูุนูุงู ููุธุงู ุงูุตูุงุญูุงุช
# Worker Types and Permissions System Guide

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุชูุฏู ูุฅุฏุงุฑุฉ ุฃููุงุน ุงูุนูุงู ูุน ุตูุงุญูุงุช ูุฎุชููุฉ ููู ููุน. ูุชูุญ ูุฐุง ุงููุธุงู ุงูุชุญูู ุงูุฏููู ูู ุงููุตูู ุฅูู ุตูุญุงุช ููุญุฉ ุงูุชุญูู ุจูุงุกู ุนูู ููุน ุงูุนุงูู.

---

## ๐ฏ ุฃููุงุน ุงูุนูุงู ุงููุชุงุญุฉ

### 1. **ูุฏูุฑ ุนุงู** (General Manager)
- **ุงูููุฏ:** `general_manager`
- **ุงูุตูุงุญูุงุช:** ูุงูู ุงูุตูุงุญูุงุช (ูุซู ุงููุฏูุฑ ุงูุญุงูู)
- **ุงููุตูู:** ุฌููุน ุตูุญุงุช ููุญุฉ ุงูุชุญูู
- **ููุญุฉ ุงูุชุญูู:** `/dashboard`

### 2. **ูุฏูุฑ ูุชุฌุฑ ุงูุฃููุดุฉ** (Fabric Store Manager)
- **ุงูููุฏ:** `fabric_store_manager`
- **ุงูุตูุงุญูุงุช:** ูุญุฏูุฏุฉ ูุฅุฏุงุฑุฉ ุงูุฃููุดุฉ ููุท
- **ุงููุตูู:** 
  - โ ุฅุฏุงุฑุฉ ุงูุฃููุดุฉ (`/dashboard/fabrics`)
  - โ ุจุงูู ุตูุญุงุช ููุญุฉ ุงูุชุญูู
- **ููุญุฉ ุงูุชุญูู:** `/dashboard/fabric-manager`

### 3. **ูุญุงุณุจ** (Accountant)
- **ุงูููุฏ:** `accountant`
- **ุงูุตูุงุญูุงุช:** ูุญุฏูุฏุฉ ูููุธุงู ุงููุญุงุณุจู ูุงูุชูุงุฑูุฑ
- **ุงููุตูู:**
  - โ ุงููุธุงู ุงููุญุงุณุจู (`/dashboard/accounting`)
  - โ ุจุงูู ุตูุญุงุช ููุญุฉ ุงูุชุญูู
- **ููุญุฉ ุงูุชุญูู:** `/dashboard/accountant`

### 4. **ุฎูุงุท/ุฎูุงุทุฉ** (Tailor)
- **ุงูููุฏ:** `tailor`
- **ุงูุตูุงุญูุงุช:** ูุญุฏูุฏุฉ ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช ุงููุฎุตุตุฉ
- **ุงููุตูู:**
  - โ ุทูุจุงุช ุงูุชูุตูู (`/dashboard/worker-orders`)
  - โ ุจุงูู ุตูุญุงุช ููุญุฉ ุงูุชุญูู
- **ููุญุฉ ุงูุชุญูู:** `/dashboard/worker-orders`

---

## ๐๏ธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Migration File
ุชู ุฅูุดุงุก ููู migration ุฌุฏูุฏ: `supabase/migrations/add_worker_types.sql`

### ุงูุชุบููุฑุงุช:
```sql
-- ุฅุถุงูุฉ ุนููุฏ worker_type ุฅูู ุฌุฏูู workers
ALTER TABLE workers 
ADD COLUMN worker_type TEXT DEFAULT 'tailor' 
CHECK (worker_type IN ('tailor', 'fabric_store_manager', 'accountant', 'general_manager'));
```

### ุชุทุจูู Migration:
```bash
# ูู Supabase Dashboard โ SQL Editor
# ููุฐ ูุญุชูู ููู: supabase/migrations/add_worker_types.sql
```

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. `src/lib/worker-types.ts`
- ุชุนุฑูู ุฃููุงุน ุงูุนูุงู
- ุชุนุฑูู ุงูุตูุงุญูุงุช ููู ููุน
- ุฏูุงู ูุณุงุนุฏุฉ ููุญุตูู ุนูู ุงูุฃุณูุงุก ูุงูุตูุงุญูุงุช

### 2. `src/hooks/useWorkerPermissions.ts`
- Hook ููุชุญูู ูู ุตูุงุญูุงุช ุงูุนุงูู
- ุฌูุจ ููุน ุงูุนุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

### 3. `src/components/ProtectedWorkerRoute.tsx`
- Component ูุญูุงูุฉ ุงูุตูุญุงุช ุจูุงุกู ุนูู ุงูุตูุงุญูุงุช
- ุฅุนุงุฏุฉ ุชูุฌูู ุชููุงุฆูุฉ ูููุณุชุฎุฏููู ุบูุฑ ุงููุตุฑุญ ููู

### 4. `src/app/dashboard/fabric-manager/page.tsx`
- ููุญุฉ ุชุญูู ูุฎุตุตุฉ ููุฏูุฑ ูุชุฌุฑ ุงูุฃููุดุฉ

### 5. `src/app/dashboard/accountant/page.tsx`
- ููุญุฉ ุชุญูู ูุฎุตุตุฉ ูููุญุงุณุจ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### 1. `src/lib/services/worker-service.ts`
- ุฅุถุงูุฉ `WorkerType` type
- ุฅุถุงูุฉ `worker_type` ุฅูู interfaces

### 2. `src/app/dashboard/workers/page.tsx`
- ุฅุถุงูุฉ ุญูู "ููุน ุงูุนุงูู" ูู ูููุฐุฌ ุงูุฅุถุงูุฉ
- ุฅุถุงูุฉ ุญูู "ููุน ุงูุนุงูู" ูู ูููุฐุฌ ุงูุชุนุฏูู
- ุนุฑุถ ููุน ุงูุนุงูู ูู ุจุทุงูุฉ ุงูุนุงูู

### 3. `src/app/api/workers/create/route.ts`
- ุฏุนู `worker_type` ุนูุฏ ุฅูุดุงุก ุนุงูู ุฌุฏูุฏ

### 4. `src/app/dashboard/fabrics/page.tsx`
- ุฅุถุงูุฉ ุญูุงูุฉ ุงูุตูุญุฉ ุจุงุณุชุฎุฏุงู `ProtectedWorkerRoute`
- ุงูุณูุงุญ ููุท ููุฏูุฑ ุงูุฃููุดุฉ ูุงููุฏูุฑ ุงูุนุงู

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ุนุงูู ุฌุฏูุฏ:
1. ุงุฐูุจ ุฅูู `/dashboard/workers`
2. ุงุถุบุท "ุฅุถุงูุฉ ุนุงูู ุฌุฏูุฏ"
3. ุงููุฃ ุงูุจูุงูุงุช ูุงุฎุชุฑ ููุน ุงูุนุงูู ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
4. ุงุญูุธ

### ุชุณุฌูู ุฏุฎูู ุงูุนุงูู:
1. ุงูุนุงูู ูุณุฌู ุงูุฏุฎูู ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
2. ูุชู ุชูุฌููู ุชููุงุฆูุงู ุฅูู ููุญุฉ ุงูุชุญูู ุงูููุงุณุจุฉ ุญุณุจ ููุนู
3. ููููู ุงููุตูู ููุท ููุตูุญุงุช ุงููุตุฑุญ ูู ุจูุง

---

## ๐ ูุธุงู ุงูุตูุงุญูุงุช

### ูุตูููุฉ ุงูุตูุงุญูุงุช:

| ุงูุตูุญุฉ | ูุฏูุฑ ุนุงู | ูุฏูุฑ ุฃููุดุฉ | ูุญุงุณุจ | ุฎูุงุท |
|--------|----------|------------|-------|------|
| ุงูุทูุจุงุช | โ | โ | โ | โ |
| ุงูุฃููุดุฉ | โ | โ | โ | โ |
| ุงูููุชุฌุงุช | โ | โ | โ | โ |
| ุงููุญุงุณุจุฉ | โ | โ | โ | โ |
| ุงูุนูุงู | โ | โ | โ | โ |
| ุงูููุงุนูุฏ | โ | โ | โ | โ |
| ุงูุฅุนุฏุงุฏุงุช | โ | โ | โ | โ |

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุนุงูู:
```bash
# ุชุฃูุฏ ูู ุชุทุจูู migration ุฃููุงู
# ุซู ุฃุถู ุนุงูู ุฌุฏูุฏ ูู ููุน "ูุฏูุฑ ูุชุฌุฑ ุงูุฃููุดุฉ"
```

### 2. ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู:
```bash
# ุณุฌู ุฏุฎูู ุจุญุณุงุจ ูุฏูุฑ ุงูุฃููุดุฉ
# ุชุฃูุฏ ูู ุงูุชูุฌูู ุฅูู /dashboard/fabric-manager
# ุญุงูู ุงููุตูู ุฅูู /dashboard/workers (ูุฌุจ ุฃู ูุชู ููุนู)
```

### 3. ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช:
```bash
# ุณุฌู ุฏุฎูู ุจุญุณุงุจ ูุญุงุณุจ
# ุชุฃูุฏ ูู ุงููุตูู ุฅูู /dashboard/accounting
# ุญุงูู ุงููุตูู ุฅูู /dashboard/fabrics (ูุฌุจ ุฃู ูุชู ููุนู)
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **Migration ุฅูุฒุงูู:** ูุฌุจ ุชุทุจูู migration ูุจู ุงุณุชุฎุฏุงู ุงููุธุงู
2. **ุงูุนูุงู ุงูุญุงูููู:** ุณูุชู ุชุนููููู ุชููุงุฆูุงู ูู "ุฎูุงุท" (tailor)
3. **ุงููุฏูุฑ ุงูุนุงู:** ูู ููุณ ุตูุงุญูุงุช Admin ุงูุญุงูู
4. **ุงูุชูุงูู:** ุงููุธุงู ูุชูุงูู ูุน ุฌููุน ุงูููุฒุงุช ุงูุญุงููุฉ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

1. ุฅุถุงูุฉ ุตูุญุฉ dashboard ููุฎูุงุทูู (`/dashboard/worker-orders`)
2. ุชุฎุตูุต Header/Sidebar ูุนุฑุถ ุงูููุงุฆู ุงูููุงุณุจุฉ ููู ููุน
3. ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ูุฎุตุตุฉ ููู ููุน ุนุงูู
4. ุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช ูุฎุตุต ููู ููุน

---

ุชู ุฅูุดุงุก ูุฐุง ุงููุธุงู ุจูุฌุงุญ! ๐

