# ๐งช ุฏููู ุงุฎุชุจุงุฑ ุงููุฑุญูุฉ ุงูุฃููู - ุฌุฏูู ุงูุนูุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุณุงุนุฏู ุนูู ุงุฎุชุจุงุฑ ูุฌุงุญ ุชุญููู ุฌุฏูู ุงูุนูุงู ุฅูู Supabase.

---

## โ ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ Supabase

### 1.1 ุชุญุฏูุซ ููู `.env.local`

ุชุฃูุฏ ูู ุฃู ููู `.env.local` ูุญุชูู ุนูู ุงูููู ุงูุตุญูุญุฉ:

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

### 1.2 ุชูููุฐ ููู SQL

1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงููุฑ ุนูู **New query**
4. ุงูุณุฎ ูุญุชูู ููู `migrations/01-workers-migration.sql`
5. ุงูุตูู ูู ุงููุญุฑุฑ
6. ุงููุฑ ุนูู **Run** ุฃู ุงุถุบุท `Ctrl+Enter`
7. ุชุญูู ูู ุฑุณุงูุฉ ุงููุฌุงุญ

### 1.3 ุงูุชุญูู ูู ุฅูุดุงุก ุงูุฌุฏุงูู

ูู SQL Editorุ ููุฐ ุงูุงุณุชุนูุงู ุงูุชุงูู:

```sql
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' AND table_name IN ('users', 'workers');
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
table_name
----------
users
workers
```

---

## โ ุงูุฎุทูุฉ 2: ุฅูุดุงุก ูุณุชุฎุฏู Admin

### 2.1 ุฅูุดุงุก ุงููุณุชุฎุฏู ุนุจุฑ Supabase Auth

1. ุงุฐูุจ ุฅูู **Authentication** โ **Users**
2. ุงููุฑ ุนูู **Add user**
3. ุฃุฏุฎู ุงูุจูุงูุงุช:
   - Email: `admin@yasminalsh.com`
   - Password: `Admin@123456` (ุฃู ุฃู ูููุฉ ูุฑูุฑ ูููุฉ)
   - Auto Confirm User: โ ูุนู
4. ุงููุฑ ุนูู **Create user**
5. **ุงุญูุธ UUID** ุงูุฎุงุต ุจุงููุณุชุฎุฏู (ุณุชุญุชุงุฌู ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ)

### 2.2 ุฅุถุงูุฉ ุจูุงูุงุช Admin ูู ุฌุฏูู users

ูู SQL Editorุ ููุฐ ุงูุงุณุชุนูุงู ุงูุชุงูู (ุงุณุชุจุฏู UUID ุจุงููููุฉ ุงูุญููููุฉ):

```sql
INSERT INTO users (id, email, full_name, phone, role, is_active)
VALUES (
  'UUID-ูู-ุงูุฎุทูุฉ-ุงูุณุงุจูุฉ',
  'admin@yasminalsh.com',
  'ูุฏูุฑ ุงููุธุงู',
  '+966500000000',
  'admin',
  true
);
```

---

## โ ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุนุงูู ุชุฌุฑูุจู

### 3.1 ุฅูุดุงุก ูุณุชุฎุฏู Worker ุนุจุฑ Supabase Auth

1. ุงุฐูุจ ุฅูู **Authentication** โ **Users**
2. ุงููุฑ ุนูู **Add user**
3. ุฃุฏุฎู ุงูุจูุงูุงุช:
   - Email: `fatima@yasminalsh.com`
   - Password: `Worker@123456`
   - Auto Confirm User: โ ูุนู
4. **ุงุญูุธ UUID** ุงูุฎุงุต ุจุงููุณุชุฎุฏู

### 3.2 ุฅุถุงูุฉ ุจูุงูุงุช Worker ูู ุงูุฌุฏุงูู

ูู SQL Editorุ ููุฐ ุงูุงุณุชุนูุงูุงุช ุงูุชุงููุฉ (ุงุณุชุจุฏู UUID):

```sql
-- ุฅุถุงูุฉ ูู ุฌุฏูู users
INSERT INTO users (id, email, full_name, phone, role, is_active)
VALUES (
  'UUID-ูู-ุงูุฎุทูุฉ-ุงูุณุงุจูุฉ',
  'fatima@yasminalsh.com',
  'ูุงุทูุฉ ุฃุญูุฏ',
  '+966501234567',
  'worker',
  true
);

-- ุฅุถุงูุฉ ูู ุฌุฏูู workers
INSERT INTO workers (
  user_id,
  specialty,
  experience_years,
  hourly_rate,
  performance_rating,
  skills,
  bio,
  is_available
)
VALUES (
  'UUID-ูู-ุงูุฎุทูุฉ-ุงูุณุงุจูุฉ',
  'ูุณุงุชูู ุฒูุงู',
  8,
  50.00,
  4.8,
  ARRAY['ุฎูุงุทุฉ ูุฏููุฉ', 'ุชุทุฑูุฒ', 'ุชุตููู'],
  'ุฎูุงุทุฉ ูุชุฎุตุตุฉ ูู ูุณุงุชูู ุงูุฒูุงู ูุน ุฎุจุฑุฉ 8 ุณููุงุช',
  true
);
```

---

## โ ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ RLS Policies

### 4.1 ุงุฎุชุจุงุฑ ูุฑุงุกุฉ ุงูุนูุงู (ุจุฏูู ุชุณุฌูู ุฏุฎูู)

ูู SQL Editorุ ููุฐ:

```sql
SELECT * FROM workers WHERE is_available = true;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ูุฌุจ ุฃู ุชุฑู ุงูุนุงูู ุงูุฐู ุฃูุดุฃุชู

### 4.2 ุงุฎุชุจุงุฑ ูุฑุงุกุฉ ุฌููุน ุงูุนูุงู (ูู Admin)

1. ุณุฌู ุงูุฏุฎูู ูู Admin ูู ุงูุชุทุจูู
2. ูู SQL Editorุ ููุฐ:

```sql
SELECT * FROM workers;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ูุฌุจ ุฃู ุชุฑู ุฌููุน ุงูุนูุงู

---

## โ ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงูุชุทุจูู

### 5.1 ุชุดุบูู ุงูุชุทุจูู

```bash
npm run dev
```

### 5.2 ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุนูุงู

1. ุงูุชุญ ุงููุชุตูุญ ุนูู `http://localhost:3000`
2. ุณุฌู ุงูุฏุฎูู ูู Admin (`admin@yasminalsh.com`)
3. ุงุฐูุจ ุฅูู **Dashboard** โ **ุงูุนูุงู**
4. ุชุญูู ูู ุธููุฑ ุงูุนุงูู ุงูุฐู ุฃูุดุฃุชู

### 5.3 ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุนุงูู ุฌุฏูุฏ

1. ูู ุตูุญุฉ ุงูุนูุงูุ ุงููุฑ ุนูู **ุฅุถุงูุฉ ุนุงูู ุฌุฏูุฏ**
2. ุงููุฃ ุงููููุฐุฌ:
   - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: `aisha@yasminalsh.com`
   - ูููุฉ ุงููุฑูุฑ: `Worker@123456`
   - ุงูุงุณู ุงููุงูู: `ุนุงุฆุดุฉ ูุญูุฏ`
   - ุฑูู ุงููุงุชู: `+966502345678`
   - ุงูุชุฎุตุต: `ูุณุงุชูู ุณูุฑุฉ`
3. ุงููุฑ ุนูู **ุฅุถุงูุฉ**
4. ุชุญูู ูู ุธููุฑ ุฑุณุงูุฉ ูุฌุงุญ
5. ุชุญูู ูู ุธููุฑ ุงูุนุงูู ุงูุฌุฏูุฏ ูู ุงููุงุฆูุฉ

### 5.4 ุงุฎุชุจุงุฑ ุชุญุฏูุซ ุนุงูู

1. ุงููุฑ ุนูู **ุชุนุฏูู** ุจุฌุงูุจ ุฃุญุฏ ุงูุนูุงู
2. ุบููุฑ ุงูุชุฎุตุต ุฃู ุฃู ูุนูููุฉ ุฃุฎุฑู
3. ุงุญูุธ ุงูุชุบููุฑุงุช
4. ุชุญูู ูู ุชุญุฏูุซ ุงูุจูุงูุงุช

### 5.5 ุงุฎุชุจุงุฑ ุญุฐู ุนุงูู

1. ุงููุฑ ุนูู **ุญุฐู** ุจุฌุงูุจ ุฃุญุฏ ุงูุนูุงู
2. ุฃูุฏ ุงูุญุฐู
3. ุชุญูู ูู ุงุฎุชูุงุก ุงูุนุงูู ูู ุงููุงุฆูุฉ

---

## โ ุงูุฎุทูุฉ 6: ุงูุชุญูู ูู ุงูุจูุงูุงุช ูู Supabase

### 6.1 ุงูุชุญูู ูู ุฌุฏูู users

ูู SQL Editor:

```sql
SELECT id, email, full_name, role, is_active FROM users;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ูุฌุจ ุฃู ุชุฑู ุฌููุน ุงููุณุชุฎุฏููู (Admin + Workers)

### 6.2 ุงูุชุญูู ูู ุฌุฏูู workers

```sql
SELECT 
  w.id,
  u.full_name,
  w.specialty,
  w.experience_years,
  w.is_available
FROM workers w
JOIN users u ON w.user_id = u.id;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ูุฌุจ ุฃู ุชุฑู ุฌููุน ุงูุนูุงู ูุน ุฃุณูุงุฆูู

---

## โ ุงูุฎุทูุฉ 7: ุงุฎุชุจุงุฑ Fallback (ุงุฎุชูุงุฑู)

### 7.1 ุชุนุทูู Supabase ูุคูุชุงู

ูู ููู `.env.local`ุ ุบููุฑ ุงูููู ุฅูู ููู ุฎุงุทุฆุฉ:

```env
NEXT_PUBLIC_SUPABASE_URL=https://invalid.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=invalid-key
```

### 7.2 ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู

```bash
npm run dev
```

### 7.3 ุงูุชุญูู ูู ุงุณุชุฎุฏุงู Mock Data

1. ุงูุชุญ ุตูุญุฉ ุงูุนูุงู
2. ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ุชุญุฐูุฑ: "โ๏ธ Supabase not configured, using mock data"
3. ูุฌุจ ุฃู ุชุฑู ุงูุนูุงู ุงูุชุฌุฑูุจููู ูู Mock Data

### 7.4 ุฅุนุงุฏุฉ ุชูุนูู Supabase

ุฃุนุฏ ุงูููู ุงูุตุญูุญุฉ ูู `.env.local` ูุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู.

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] ุชู ุชูููุฐ ููู SQL ุจูุฌุงุญ
- [ ] ุชู ุฅูุดุงุก ุฌุฏููู users ู workers
- [ ] ุชู ุฅูุดุงุก ูุณุชุฎุฏู Admin
- [ ] ุชู ุฅูุดุงุก ุนุงูู ุชุฌุฑูุจู ูุงุญุฏ ุนูู ุงูุฃูู
- [ ] RLS Policies ุชุนูู ุจุดูู ุตุญูุญ
- [ ] ูููู ุฅุถุงูุฉ ุนุงูู ุฌุฏูุฏ ูู ุงูุชุทุจูู
- [ ] ูููู ุชุญุฏูุซ ุจูุงูุงุช ุนุงูู
- [ ] ูููู ุญุฐู ุนุงูู
- [ ] ุงูุจูุงูุงุช ูุญููุธุฉ ูู Supabase
- [ ] Fallback ูุนูู ุนูุฏ ุชุนุทูู Supabase

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ 1: "relation does not exist"

**ุงูุญู:** ุชุฃูุฏ ูู ุชูููุฐ ููู SQL ุจุงููุงูู

### ุงููุดููุฉ 2: "RLS policy violation"

**ุงูุญู:** ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ูู Admin

### ุงููุดููุฉ 3: "Failed to create user"

**ุงูุญู:** ุชุญูู ูู ุตุญุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ

### ุงููุดููุฉ 4: ุงูุจูุงูุงุช ูุง ุชุธูุฑ

**ุงูุญู:** 
1. ุชุญูู ูู Console ูู ุงููุชุตูุญ
2. ุชุญูู ูู ุตุญุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
3. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ

---

## โ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุฅููุงู ุฌููุน ุงูุฎุทูุงุช ุจูุฌุงุญ:

- โ ุฌุฏูู ุงูุนูุงู ูุนูู ุจุงููุงูู ูุน Supabase
- โ ูููู ุฅุถุงูุฉ/ุชุญุฏูุซ/ุญุฐู ุงูุนูุงู
- โ ุงูุจูุงูุงุช ูุญููุธุฉ ูู ุงูุณุญุงุจุฉ
- โ RLS Policies ุชุญูู ุงูุจูุงูุงุช
- โ Fallback ูุนูู ูู ุญุงูุฉ ูุดู ุงูุงุชุตุงู

---

**ุจุนุฏ ุงูุชุฃูุฏ ูู ูุฌุงุญ ุฌููุน ุงูุงุฎุชุจุงุฑุงุชุ ููููู ุงูุงูุชูุงู ุฅูู ุงููุฑุญูุฉ ุงูุชุงููุฉ! ๐**

