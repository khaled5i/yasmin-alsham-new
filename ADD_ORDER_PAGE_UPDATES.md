# تحديثات صفحة إضافة الطلبات (Add Order Page Updates)

## نظرة عامة
تم إجراء تحديثات شاملة على صفحة إضافة الطلبات لتحسين تنظيم الحقول وإضافة معلومات جديدة.

## التعديلات المنفذة

### 1. إعادة تنظيم قسم "المعلومات الأساسية"

تم إعادة ترتيب الحقول في قسم المعلومات الأساسية بالترتيب التالي:

1. **الاسم** (Name) - حقل إدخال نصي
2. **رقم الهاتف** (Phone Number) - حقل إدخال رقمي
3. **رقم الطلب** (Order Number) - حقل إدخال
4. **موعد التسليم** (Delivery Date) - حقل اختيار تاريخ
5. **تاريخ استلام الطلب** (Order Received Date) - حقل تاريخ تلقائي (معطل، يتم ملؤه تلقائياً بالتاريخ الحالي)
6. **السعر + طريقة الدفع** (Price + Payment Method):
   - السعر: حقل إدخال رقمي
   - طريقة الدفع: Radio buttons مع خيارين:
     - كاش (Cash)
     - شبكة (Card/Network)
7. **الدفعة المستلمة** (Amount Paid) - حقل إدخال رقمي
8. **الدفعة المتبقية** (Remaining Amount) - حقل رقمي محسوب تلقائياً (السعر - الدفعة المستلمة)

### 2. إضافة قسم "معلومات أخرى"

تم إنشاء قسم جديد بعنوان "معلومات أخرى" يحتوي على:

1. **وصف الفستان** (Dress Description) - حقل textarea متعدد الأسطر
2. **نوع القماش** (Fabric Type) - حقل إدخال نصي
3. **العامل المسؤول** (Assigned Worker) - قائمة منسدلة (dropdown)

### 3. تحديثات قاعدة البيانات

تم إنشاء ملف ترحيل جديد: `migrations/11-add-order-fields.sql`

الحقول المضافة:
- `payment_method`: طريقة الدفع (cash, card, bank_transfer, check)
- `order_received_date`: تاريخ استلام الطلب (DATE)

### 4. تحديثات الكود

#### ملف: `src/app/dashboard/add-order/page.tsx`
- تحديث `formData` لإضافة:
  - `paymentMethod`: القيمة الافتراضية 'cash'
  - `orderReceivedDate`: القيمة الافتراضية التاريخ الحالي
- إعادة تنظيم واجهة المستخدم حسب المتطلبات
- إضافة قسم "معلومات أخرى" الجديد

#### ملف: `src/lib/services/order-service.ts`
- تحديث `Order` interface لإضافة:
  - `payment_method?: 'cash' | 'card' | 'bank_transfer' | 'check'`
  - `order_received_date?: string`
- تحديث `CreateOrderData` interface
- تحديث `UpdateOrderData` interface
- تحديث دالة `create()` لحفظ الحقول الجديدة

#### ملف: `src/hooks/useTranslation.ts`
إضافة مفاتيح الترجمة الجديدة:
- `order_received_date`: "تاريخ استلام الطلب" / "Order Received Date"
- `payment_method`: "طريقة الدفع" / "Payment Method"
- `cash`: "كاش" / "Cash"
- `card`: "شبكة" / "Card/Network"
- `dress_description`: "وصف الفستان" / "Dress Description"
- `dress_description_placeholder`: "أدخل وصف تفصيلي للفستان..." / "Enter detailed dress description..."
- `other_information`: "معلومات أخرى" / "Other Information"
- `enter_client_name`: "أدخل اسم الزبونة" / "Enter client name"
- `enter_phone`: "أدخل رقم الهاتف" / "Enter phone number"
- `enter_order_number`: "أدخل رقم الطلب" / "Enter order number"
- `optional`: "اختياري" / "Optional"
- `sar`: "ريال" / "SAR"

## الميزات الجديدة

1. **تاريخ استلام الطلب التلقائي**: يتم ملء هذا الحقل تلقائياً بالتاريخ الحالي ولا يمكن تعديله
2. **طريقة الدفع**: يمكن للمستخدم اختيار طريقة الدفع (كاش أو شبكة) بجانب حقل السعر مباشرة
3. **وصف الفستان**: حقل نصي متعدد الأسطر لإدخال وصف تفصيلي للفستان
4. **تنظيم أفضل**: فصل المعلومات الأساسية عن المعلومات الإضافية لتحسين تجربة المستخدم

## التصميم المتجاوب (Responsive Design)

- تم الحفاظ على التصميم المتجاوب باستخدام Tailwind CSS
- Grid layout متجاوب: `md:grid-cols-2 lg:grid-cols-3`
- جميع الحقول متوافقة مع الأجهزة المحمولة (mobile-first)

## التحقق من البيانات

- جميع الحقول المطلوبة محددة بعلامة `*`
- التحقق من أن الدفعة المستلمة لا تتجاوز السعر الكلي
- حساب تلقائي للدفعة المتبقية

## الخطوات التالية

1. تطبيق ملف الترحيل على قاعدة البيانات:
   ```bash
   # في Supabase SQL Editor
   # قم بتشغيل محتوى ملف: migrations/11-add-order-fields.sql
   ```

2. اختبار الصفحة للتأكد من:
   - عمل جميع الحقول بشكل صحيح
   - حفظ البيانات في قاعدة البيانات
   - التحقق من البيانات
   - التصميم المتجاوب

## ملاحظات مهمة

- تم الحفاظ على جميع الوظائف الموجودة مسبقاً
- لم يتم حذف أي حقول، فقط إعادة تنظيمها
- جميع التسميات باللغة العربية كما هو مطلوب
- التصميم متوافق مع باقي صفحات التطبيق

